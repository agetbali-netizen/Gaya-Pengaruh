<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enumerator Manpower Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .status-active { background: linear-gradient(135deg, #10b981, #059669); }
        .status-inactive { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .status-training { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .status-available { background: linear-gradient(135deg, #3b82f6, #2563eb); }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-lg border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-lg">📊</span>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-800">Enumerator Management</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-600">Last updated: <span id="lastUpdated">Just now</span></span>
                    <button onclick="refreshData()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors">
                        🔄 Refresh
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-6 py-8">
        <!-- Stats Overview -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-100">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Total Enumerators</p>
                        <p class="text-3xl font-bold text-gray-900" id="totalCount">24</p>
                    </div>
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                        <span class="text-2xl">👥</span>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-100">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Active Today</p>
                        <p class="text-3xl font-bold text-green-600" id="activeCount">18</p>
                    </div>
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                        <span class="text-2xl">✅</span>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-100">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">In Training</p>
                        <p class="text-3xl font-bold text-orange-600" id="trainingCount">4</p>
                    </div>
                    <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                        <span class="text-2xl">📚</span>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-100">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Available</p>
                        <p class="text-3xl font-bold text-blue-600" id="availableCount">2</p>
                    </div>
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                        <span class="text-2xl">⏳</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Enumerator List -->
            <div class="lg:col-span-2">
                <div class="bg-white rounded-xl shadow-lg border border-gray-100">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-xl font-semibold text-gray-800">Enumerator List</h2>
                            <button onclick="showAddForm()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors">
                                ➕ Add New
                            </button>
                        </div>
                        
                        <!-- Search and Filter -->
                        <div class="flex flex-col sm:flex-row gap-4">
                            <input type="text" id="searchInput" placeholder="Search enumerators..." 
                                   class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                   onkeyup="filterEnumerators()">
                            <select id="statusFilter" onchange="filterEnumerators()" 
                                    class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="">All Status</option>
                                <option value="active">Active</option>
                                <option value="available">Available</option>
                                <option value="training">Training</option>
                                <option value="inactive">Inactive</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <div id="enumeratorList" class="space-y-4">
                            <!-- Enumerator cards will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions & Assignment Panel -->
            <div class="space-y-6">
                <!-- Quick Actions -->
                <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-100">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Quick Actions</h3>
                    <div class="space-y-3">
                        <button onclick="bulkAssign()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg transition-colors">
                            📋 Bulk Assignment
                        </button>
                        <button onclick="generateReport()" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-lg transition-colors">
                            📊 Generate Report
                        </button>
                        <button onclick="scheduleTraining()" class="w-full bg-orange-600 hover:bg-orange-700 text-white py-3 px-4 rounded-lg transition-colors">
                            🎓 Schedule Training
                        </button>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-100">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Recent Activity</h3>
                    <div id="activityLog" class="space-y-3">
                        <!-- Activity items will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Modal -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-md mx-4">
            <div class="flex items-center justify-between mb-6">
                <h3 id="modalTitle" class="text-xl font-semibold text-gray-800">Add New Enumerator</h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 text-2xl">×</button>
            </div>
            
            <form id="enumeratorForm" onsubmit="saveEnumerator(event)">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                        <input type="text" id="nameInput" required 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Employee ID</label>
                        <input type="text" id="idInput" required 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                        <input type="tel" id="phoneInput" required 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                        <select id="statusInput" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="available">Available</option>
                            <option value="active">Active</option>
                            <option value="training">Training</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Area Assignment</label>
                        <input type="text" id="areaInput" 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                               placeholder="e.g., District A, Zone 1">
                    </div>
                </div>
                
                <div class="flex gap-3 mt-6">
                    <button type="button" onclick="closeModal()" 
                            class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                        Cancel
                    </button>
                    <button type="submit" 
                            class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                        Save
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Sample data
        let enumerators = [
            { id: 'EN001', name: 'Sarah Johnson', phone: '+1-555-0123', status: 'active', area: 'District A', lastActive: '2 hours ago' },
            { id: 'EN002', name: 'Michael Chen', phone: '+1-555-0124', status: 'active', area: 'District B', lastActive: '1 hour ago' },
            { id: 'EN003', name: 'Emily Rodriguez', phone: '+1-555-0125', status: 'training', area: 'Unassigned', lastActive: '1 day ago' },
            { id: 'EN004', name: 'David Kim', phone: '+1-555-0126', status: 'available', area: 'District C', lastActive: '3 hours ago' },
            { id: 'EN005', name: 'Lisa Thompson', phone: '+1-555-0127', status: 'active', area: 'District A', lastActive: '30 min ago' },
            { id: 'EN006', name: 'James Wilson', phone: '+1-555-0128', status: 'inactive', area: 'District D', lastActive: '2 days ago' }
        ];

        let activities = [
            { action: 'Sarah Johnson completed survey batch', time: '15 min ago', type: 'completion' },
            { action: 'New enumerator Michael Chen added', time: '1 hour ago', type: 'addition' },
            { action: 'Training scheduled for 5 enumerators', time: '2 hours ago', type: 'training' },
            { action: 'District A assignment updated', time: '3 hours ago', type: 'assignment' }
        ];

        let editingId = null;

        function renderEnumerators(list = enumerators) {
            const container = document.getElementById('enumeratorList');
            
            if (list.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">No enumerators found matching your criteria.</p>';
                return;
            }
            
            container.innerHTML = list.map(enum => `
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow fade-in">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <div class="flex items-center gap-3 mb-2">
                                <h4 class="font-semibold text-gray-800">${enum.name}</h4>
                                <span class="px-3 py-1 rounded-full text-xs font-medium status-${enum.status} text-white">
                                    ${enum.status.charAt(0).toUpperCase() + enum.status.slice(1)}
                                </span>
                            </div>
                            <div class="text-sm text-gray-600 space-y-1">
                                <p><span class="font-medium">ID:</span> ${enum.id}</p>
                                <p><span class="font-medium">Phone:</span> ${enum.phone}</p>
                                <p><span class="font-medium">Area:</span> ${enum.area}</p>
                                <p><span class="font-medium">Last Active:</span> ${enum.lastActive}</p>
                            </div>
                        </div>
                        <div class="flex flex-col gap-2 ml-4">
                            <button onclick="editEnumerator('${enum.id}')" 
                                    class="px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors text-sm">
                                Edit
                            </button>
                            <button onclick="deleteEnumerator('${enum.id}')" 
                                    class="px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors text-sm">
                                Remove
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderActivity() {
            const container = document.getElementById('activityLog');
            container.innerHTML = activities.map(activity => `
                <div class="flex items-start gap-3 p-3 bg-gray-50 rounded-lg">
                    <div class="w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"></div>
                    <div class="flex-1">
                        <p class="text-sm text-gray-800">${activity.action}</p>
                        <p class="text-xs text-gray-500">${activity.time}</p>
                    </div>
                </div>
            `).join('');
        }

        function updateStats() {
            const total = enumerators.length;
            const active = enumerators.filter(e => e.status === 'active').length;
            const training = enumerators.filter(e => e.status === 'training').length;
            const available = enumerators.filter(e => e.status === 'available').length;
            
            document.getElementById('totalCount').textContent = total;
            document.getElementById('activeCount').textContent = active;
            document.getElementById('trainingCount').textContent = training;
            document.getElementById('availableCount').textContent = available;
        }

        function filterEnumerators() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const status = document.getElementById('statusFilter').value;
            
            let filtered = enumerators.filter(enum => {
                const matchesSearch = enum.name.toLowerCase().includes(search) || 
                                    enum.id.toLowerCase().includes(search) ||
                                    enum.area.toLowerCase().includes(search);
                const matchesStatus = !status || enum.status === status;
                return matchesSearch && matchesStatus;
            });
            
            renderEnumerators(filtered);
        }

        function showAddForm() {
            editingId = null;
            document.getElementById('modalTitle').textContent = 'Add New Enumerator';
            document.getElementById('enumeratorForm').reset();
            document.getElementById('modal').classList.remove('hidden');
            document.getElementById('modal').classList.add('flex');
        }

        function editEnumerator(id) {
            const enum = enumerators.find(e => e.id === id);
            if (!enum) return;
            
            editingId = id;
            document.getElementById('modalTitle').textContent = 'Edit Enumerator';
            document.getElementById('nameInput').value = enum.name;
            document.getElementById('idInput').value = enum.id;
            document.getElementById('phoneInput').value = enum.phone;
            document.getElementById('statusInput').value = enum.status;
            document.getElementById('areaInput').value = enum.area;
            
            document.getElementById('modal').classList.remove('hidden');
            document.getElementById('modal').classList.add('flex');
        }

        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
            document.getElementById('modal').classList.remove('flex');
            editingId = null;
        }

        function saveEnumerator(event) {
            event.preventDefault();
            
            const formData = {
                id: document.getElementById('idInput').value,
                name: document.getElementById('nameInput').value,
                phone: document.getElementById('phoneInput').value,
                status: document.getElementById('statusInput').value,
                area: document.getElementById('areaInput').value || 'Unassigned',
                lastActive: 'Just now'
            };
            
            if (editingId) {
                const index = enumerators.findIndex(e => e.id === editingId);
                if (index !== -1) {
                    enumerators[index] = { ...enumerators[index], ...formData };
                    addActivity(`Updated ${formData.name}'s information`);
                }
            } else {
                // Check if ID already exists
                if (enumerators.some(e => e.id === formData.id)) {
                    alert('Employee ID already exists. Please use a different ID.');
                    return;
                }
                enumerators.push(formData);
                addActivity(`Added new enumerator ${formData.name}`);
            }
            
            closeModal();
            renderEnumerators();
            updateStats();
            updateLastUpdated();
        }

        function deleteEnumerator(id) {
            const enum = enumerators.find(e => e.id === id);
            if (!enum) return;
            
            if (confirm(`Are you sure you want to remove ${enum.name}?`)) {
                enumerators = enumerators.filter(e => e.id !== id);
                addActivity(`Removed enumerator ${enum.name}`);
                renderEnumerators();
                updateStats();
                updateLastUpdated();
            }
        }

        function addActivity(action) {
            activities.unshift({
                action: action,
                time: 'Just now',
                type: 'update'
            });
            
            // Keep only last 5 activities
            if (activities.length > 5) {
                activities = activities.slice(0, 5);
            }
            
            renderActivity();
        }

        function bulkAssign() {
            const available = enumerators.filter(e => e.status === 'available').length;
            if (available === 0) {
                alert('No available enumerators for assignment.');
                return;
            }
            alert(`Bulk assignment feature opened. ${available} enumerators available for assignment.`);
        }

        function generateReport() {
            const reportData = {
                total: enumerators.length,
                active: enumerators.filter(e => e.status === 'active').length,
                training: enumerators.filter(e => e.status === 'training').length,
                available: enumerators.filter(e => e.status === 'available').length,
                inactive: enumerators.filter(e => e.status === 'inactive').length
            };
            
            alert(`Report Generated:\n\nTotal: ${reportData.total}\nActive: ${reportData.active}\nTraining: ${reportData.training}\nAvailable: ${reportData.available}\nInactive: ${reportData.inactive}`);
        }

        function scheduleTraining() {
            const needTraining = enumerators.filter(e => e.status === 'available' || e.status === 'inactive').length;
            alert(`Training scheduler opened. ${needTraining} enumerators eligible for training.`);
        }

        function refreshData() {
            updateLastUpdated();
            renderEnumerators();
            updateStats();
            addActivity('Data refreshed');
        }

        function updateLastUpdated() {
            document.getElementById('lastUpdated').textContent = 'Just now';
        }

        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', function() {
            renderEnumerators();
            renderActivity();
            updateStats();
        });

        // Close modal when clicking outside
        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9893ed1f23839daa',t:'MTc1OTU3MzAxMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
